\ProvidesPackage{maicoursework}[MAI latex course work]
\RequirePackage{graphicx}
\RequirePackage{cmap}					% поиск в PDF
\RequirePackage{mathtext} 				% русские буквы в формулах
\RequirePackage[T2A]{fontenc}			% кодировка
\RequirePackage[utf8]{inputenc}			% кодировка исходного текста
\RequirePackage[english,russian]{babel}	% локализация и переносы

%%% Задание размер страницы
\RequirePackage{geometry}
\geometry{
	a4paper,
	left=30mm,
	top=20mm,
	right=20mm,
	bottom=20mm
}

%%% Задаём отступ у параграфа
\RequirePackage{indentfirst}
\RequirePackage{parskip}
\setlength{\parindent}{1.25cm}

%%% Задаём межстрочный интервал
\RequirePackage{setspace}
\setstretch{1.5}

%%% Дополнительная работа с математикой
\RequirePackage{amsmath,amsfonts,amssymb,amsthm,mathtools} % AMS
\RequirePackage{icomma} % "Умная" запятая: $0,2$ --- число, $0, 2$ --- перечисление

%%% Номера формул
%\mathtoolsset{showonlyrefs=true} % Показывать номера только у тех формул, на которые есть \eqref{} в тексте.

%%% Шрифты
\RequirePackage{euscript} % Шрифт Евклид
\RequirePackage{mathrsfs} % Красивый матшрифт

%%% Работа с картинками
\RequirePackage{graphicx}  % Для вставки рисунков
\setlength\fboxsep{3pt} % Отступ рамки \fbox{} от рисунка
\setlength\fboxrule{1pt} % Толщина линий рамки \fbox{}
\RequirePackage{wrapfig} % Обтекание рисунков и таблиц текстом

%%% Работа с таблицами
\RequirePackage{array,tabularx,tabulary,booktabs} % Дополнительная работа с таблицами
\RequirePackage{longtable}  % Длинные таблицы
\RequirePackage{multirow} % Слияние строк в таблице

%%% Кликабельные ссылки
\RequirePackage{hyperref}
\RequirePackage[usenames,dvipsnames,svgnames,table,rgb]{xcolor}
\hypersetup{				% Гиперссылки
    unicode=true,           % русские буквы в раздела PDF
	colorlinks,
	citecolor=black,
	filecolor=black,
	linkcolor=black,
	urlcolor=black
}

%%% Список литературы
\RequirePackage[nottoc]{tocbibind}

%%% Задаём стиль списка литературы
\RequirePackage[backend=biber,bibencoding=utf8]{biblatex}
\addbibresource{list.bib}

%%% Оформление кода
\RequirePackage{listings}
\RequirePackage{xcolor}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{mystyle}{
	backgroundcolor=\color{backcolour},
	commentstyle=\color{codegreen},
	keywordstyle=\color{magenta},
	numberstyle=\tiny\color{codegray},
	stringstyle=\color{codepurple},
	basicstyle=\ttfamily\footnotesize,
	breakatwhitespace=false,         
	breaklines=true,                 
	captionpos=b,                    
	keepspaces=true,                 
	numbers=left,                    
	numbersep=5pt,                  
	showspaces=false,                
	showstringspaces=false,
	showtabs=false,                  
	tabsize=2
}

\lstset{style=mystyle}

%%% PythonTeX
\RequirePackage{pythontex}

%%% Возможность импортировать TeX документр
\RequirePackage{import}

%%% Теоремы
\theoremstyle{plain} % Это стиль по умолчанию, его можно не переопределять.
\newtheorem{theorem}{Теорема}[section]
\newtheorem{proposition}[theorem]{Утверждение}
 
\theoremstyle{definition} % "Определение"
\newtheorem{corollary}{Следствие}[theorem]
\newtheorem{problem}{Задача}[section]
 
\theoremstyle{remark} % "Примечание"
\newtheorem*{nonum}{Решение}

%%% Способ узнать кол-во страниц в документе
\RequirePackage{lastpage}

%%% Глосарий и акронимы
\RequirePackage[acronym, toc]{glossaries}

%%% Code color (minted)
\RequirePackage{minted}

\setminted{
    fontsize=\scriptsize,
    baselinestretch=1,
    breaklines,
    linenos,
    numbersep=5pt,
    frame=lines
}

%%% Глобальные переменные
\newcommand*{\MAIInstitute}[1]{\gdef\@MAIInstitute{#1}%
}
\newcommand{\@MAIInstitute}{8}

\newcommand*{\MAITitle}[1]{\gdef\@MAITitle{#1}%
}
\newcommand{\@MAITitle}{Московский Авиационный институт \\ (Национальный исследовательский университет)}

\newcommand*{\MAIInstituteName}[1]{\gdef\@MAIInstituteName{#1}%
}
\newcommand{\@MAIInstituteName}{Информационные технологии и прикладная математика}

\newcommand*{\MAIDepartment}[1]{\gdef\@MAIDepartment{#1}%
}
\newcommand{\@MAIDepartment}{813}

\newcommand*{\MAIDepartmentName}[1]{\gdef\@MAIDepartmentName{#1}%
}
\newcommand{\@MAIDepartmentName}{Компьютерная математика}

\newcommand*{\MAISubject}[1]{\gdef\@MAISubject{#1}%
}

\newcommand*{\MAIWorkType}[1]{\gdef\@MAIWorkType{#1}%
}
\newcommand{\@MAIWorkType}{Курсовой проект}

\newcommand*{\MAIProfessorName}[1]{\gdef\@MAIProfessorName{#1}%
}

\newcommand*{\MAIGroup}[1]{\gdef\@MAIGroup{#1}%
}
\newcommand{\@MAIGroup}{М8О-310Б-18}

\renewcommand*{\maketitle}{
	
	\begin{titlepage}
		\center
		
		%------------------------------------------------
		%	Заголовок
		%------------------------------------------------

		\textsc{\bfseries \LARGE Министерство образования и науки РФ}
		
		\textsc{\large \@MAITitle}\\[1.25cm]
		
		%------------------------------------------------
		%	Логотип института
		%------------------------------------------------
		
		\includegraphics[width=2.5cm]{mai-logo.eps}
		
		%----------------------------------------------------------------------------------------
		
		\textsc{\Large Институт №\@MAIInstitute \\ «\@MAIInstituteName»}\\[0.5cm] % Название института
		
		\textsc{\large Кафедра \@MAIDepartment \\ «\@MAIDepartmentName»}\\[0.5cm] % Название кафедры
		
		%------------------------------------------------
		%	Название
		%------------------------------------------------
		
		{\bfseries \@MAIWorkType \ по дисциплине «\@MAISubject» \\ Тема: «\@title»}\\[0.5cm]
		
		%------------------------------------------------
		%	Студент, группа, преподаватель, оценка, дата.
		%------------------------------------------------
		
		\vfill
		
		\begin{minipage}{1\textwidth}
			\begin{flushright}
				\begin{tabular}{|l|r|}
					\hline 
					Студент & \@author \\
					\hline 
					Группа & \@MAIGroup \\
					\hline
					Преподаватель & \@MAIProfessorName \\ 
					\hline 
					Дата & \@date \\ 
					\hline 
				\end{tabular} 
			\end{flushright}
			\begin{flushright}
				\begin{tabular}{p{4.75cm}p{1in}}
					\\[12pt]
					Оценка: & \hrulefill \\[12pt]
					Подпись преподавателя: & \hrulefill \\[12pt]
					Подпись студента: & \hrulefill \\[12pt]
				\end{tabular}
			\end{flushright}
		\end{minipage}
		
		%------------------------------------------------
		%	Date
		%------------------------------------------------
		
		\vfill\vfill\vfill
		
		{\large Москва \the\year{}} 
		
	\end{titlepage}
	
}

%%% Определяем окружение noerr для minted
\makeatletter
\AtBeginEnvironment{noerr}{\dontdofcolorbox}
\def\dontdofcolorbox{\renewcommand\fcolorbox[4][]{##4}}
\makeatother
\newenvironment{noerr}{}%

\endinput